<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title># shandy</title>
    <link rel="stylesheet" href="../../css/vendor/bulma/bulma.css"/>
    <link rel="stylesheet" href="../../css/vendor/photon/css/photon.css"/>
    <link rel="stylesheet" href="../../css/vendor/hint.css">
    <script src="/set_node_modules_path.js"></script>
</head>
<body>
<div class="window" ic-ctrl="mainCtrl">
    <header class="toolbar toolbar-header" ic-ctrl="toolBarCtrl">
        <div class="toolbar-actions">

            <div class="btn-group">
                <a class="btn-btn-default hint--bottom" aria-label="阶段涨幅" ic-click="view_403">
                    <i class="icon icon-up"></i>
                </a>
                <a class="btn-btn-default hint--bottom" aria-label="涨跌停价计算" ic-popup-target="countSwing">
                    <i class="icon icon-publish"></i>
                </a>
            </div>

            <div class="btn-group" ic-ctrl="viewStockCtrl">
                <a class="btn-btn-default hint--bottom" aria-label="富途查看" ic-click="view_in_ftnn">
                    <span class="icon icon-search"></span>
                </a>
                <a class="btn-btn-default hint--bottom" aria-label="云财经" ic-click="go_ycj">
                    <span class="icon icon-cloud"></span>
                </a>
                <a class="btn-btn-default hint--bottom" aria-label="个股资料" ic-click="viewStock">
                    <span class="icon icon-book-open"></span>
                </a>
                <a class="btn-btn-default hint--bottom" aria-label="添加股票" ic-popup-target="addStock">
                    <span class="icon icon-plus-circled"></span>
                </a>
            </div>

            <div class="btn-group">
                <a class="btn-btn-default hint--bottom" aria-label="语音提醒" ic-popup-target="setVoiceWarn">
                    <i class="icon icon-sound"></i><!-- icon-sound icon-mute ic-click="playWarnAudio" id="playWarnAudioBtn" -->
                </a>
                <a class="btn-btn-default hint--bottom" aria-label="OCR重命名" ic-click="renameByOcr">
                    <i class="icon icon-docs"></i>
                </a>
                <a class="btn-btn-default hint--bottom" aria-label="更新token" ic-click="updateToken">
                    <i class="icon icon-shuffle"></i>
                </a>
                <a class="btn-btn-default hint--bottom" aria-label="web版本" ic-click="openInWeb">
                    <i class="icon icon-globe"></i>
                </a>
            </div>

            <div class="btn-group">
                <a class="btn-btn-default hint--bottom" aria-label="刷新" ic-click="refresh">
                    <i class="icon icon-cw"></i>
                </a>
                <a class="btn-btn-default hint--bottom" aria-label="重启" ic-click="relaunch">
                    <i class="icon icon-arrows-ccw"></i>
                </a>
                <a class="btn-btn-default hint--bottom" aria-label="退出" ic-click="quit">
                    <i class="icon icon-cd"></i>
                </a>
            </div>

            <div class="btn-group">
                <a class="btn-btn-default hint--bottom" aria-label="点击刷新当前IP" ic-click="showIp">
                    <i class="icon icon-flow-line"></i>
                    <span id="ip"></span>
                </a>
            </div>

        </div>
    </header>

    <div class="window-content">
        <div class="pane-group" style="overflow: hidden;">
            <aside class="pane-sm sidebar" ic-tabs2="a" ic-tab-$=".nav-group-item" style="height: 100%;overflow-y: auto;">
                <nav class="nav-group">
                    <a class="nav-group-item active" ic-click="showIndex"><i class="icon icon-home"></i> 首页 </a>
                </nav>
                <nav class="nav-group">
                    <h5 class="nav-group-title">N</h5>
                    <a class="nav-group-item" ic-click="openNews"><i class="icon icon-newspaper"></i> 资讯提示 </a>
                    <a class="nav-group-item" ic-click="openWarn"><i class="icon icon-bell"></i> 语音警告 </a>
                    <a class="nav-group-item" ic-click="openReminder"> <i class="icon icon-comment"></i> 交易提醒</a>
                    <a class="nav-group-item" ic-click="openPrompt"><i class="icon icon-list"></i> ToDo </a>
                </nav>
                <nav class="nav-group">
                    <h5 class="nav-group-title">T</h5>
                    <a class="nav-group-item" ic-click="show:stock_system.html" ic-dblclick="openByWindow:stock_system.html">
                        <i class="icon icon-shareable"></i> 系统
                    </a>
                    <a class="nav-group-item" ic-click="show:stock_tags.html" ic-dblclick="openByWindow:stock_tags.html">
                        <i class="icon icon-tag"></i> 标签
                    </a>
                    <!--<a class="nav-group-item" ic-click="show:stock_point.html"><i class="icon  icon-doc-text"></i> 要素</a>-->
                    <a class="nav-group-item" ic-click="show:stock_mistake.html"><i class="icon icon-cancel-circled"></i> 错误</a>
                    <a class="nav-group-item" ic-click="show:stock_replay.html"><i class="icon icon-eye"></i> 复盘</a>
                    <a class="nav-group-item" ic-click="show:stock_plan.html"><i class="icon icon-doc-text"></i> 计划</a>
                    <a class="nav-group-item" ic-click="show:stock_buy.html"><i class="icon icon-doc-text"></i> 建仓</a>
                    <a class="nav-group-item" ic-click="show:stock_sell.html"><i class="icon icon-doc-text"></i> 平仓</a>
                    <a class="nav-group-item" ic-click="show:stock_logic.html"><i class="icon icon-help"></i>逻辑</a>
                    <a class="nav-group-item" ic-click="show:stock_news.html"><i class="icon icon-newspaper"></i> 资讯</a>
                    <a class="nav-group-item" ic-click="show:note.html"><i class="icon icon-pencil"></i> 笔记</a>
                    <a class="nav-group-item" ic-click="show:stock_diary.html"><i class="icon icon-pencil"></i> 日记</a>
                    <a class="nav-group-item" ic-click="show:memo.html"><i class="icon icon-calendar"></i> 备忘</a>
                </nav>
                <nav class="nav-group">
                    <h5 class="nav-group-title">N</h5>
                    <span class="nav-group-item" ic-click="openWindow:csd">
                        <i class="icon icon-database"></i>
                        csd
                    </span>
                    <span class="nav-group-item" ic-click="openWindow:viewer">
                        <i class="icon icon-picture"></i>
                        图片浏览
                    </span>
                    <span class="nav-group-item" ic-click="openWindow:review">
                        <i class="icon icon-chart-line"></i>
                        交易记录
                    </span>
                    <span class="nav-group-item" ic-click="openWindow:reader">
                        <i class="icon icon-sound"></i>
                        Reader
                    </span>
                    <span class="nav-group-item" ic-click="openWindow:setting">
                        <i class="icon icon-cog"></i>
                        设置
                    </span>
                </nav>
            </aside>

            <main class="pane" style="height: 100%; overflow-y: auto;">
                <!--  webview -->
                <div id="viewsWrapper">
                    <div id="viewTabs" ic-tpl="viewTabs">
                        <div class="tab-group">
                            <div ic-for="i,v in model" ic-class="tab-item {{ v.active ? 'active':'' }}" ic-click="activeTab:{{ v.url }}"
                                 ic-dblclick="openByWindow:{{ v.url }}">
                                <span class="icon icon-cancel icon-close-tab" ic-click="closeTab:{{ v.url }}"></span>
                                {{ v.title }}
                            </div>
                        </div>
                    </div>
                    <div id="views">
                        <!--<webview id="web_view" src="" nodeintegration style="height: 100%;"></webview>-->
                    </div>
                </div>
                <div id="indexView">
                    <section id="rtsCtrl" ic-ctrl="rts_ctrl">
                        <div id="rts_list" ic-tpl="list">
                            <ul>
                                <li ic-for="i,v in model" code="{{v.code}}" ic-click="fill" ic-class="flex-mc {{v.warning ? 'yellow':''}}">
                                    <span class="code">{{v.code}} </span>
                                    <span class="name"> {{v.name}} </span>
                                    <span class="b1">{{v.b1/1000}} <i>k</i></span>
                                    <span ic-class="b1_reduce {{v.b1_reduce > 0 ? 'up':'down'}}">{{v.b1_reduce}} </span>
                                    <span class="increase">{{v.increase}}% </span>
                                    <span class="price">{{v.price}} </span>
                                    <span class="time"> {{v.time}}</span>
                                    <span style="font-size:0.8em;">{{ +new Date() }}</span>
                                </li>
                            </ul>
                        </div>
                        <div>
                            <div>
                                <input class="form-control" type="text" id="stock_code" ic-enter-press="add" placeholder="000858">
                            </div>
                            <div class="btn-group">
                                <button class="btn btn-default" ic-click="add">添加</button>
                                <button class="btn btn-default" ic-click="remove">删除</button>
                                <button class="btn btn-default" ic-click="change">改变</button>
                                <button class="btn btn-default" ic-click="pause">暂停</button>
                                <button class="btn btn-default" ic-click="query">继续</button>
                                <button class="btn btn-default" ic-click="clear">清除</button>
                            </div>
                        </div>
                    </section>

                    <section id="memo_box" ic-ctrl="memoCtrl">
                        <textarea id="memo">
                        </textarea>
                        <button class="none" ic-click="saveMemo">保存</button>
                    </section>
                </div>

                <!-- 添加股票 -->
                <div ic-ctrl="setStockCtrl" ic-popup="addStock">
                    <div class="column is-10" ic-form="addStock" style="padding:20px;">
                        <div class="form-group">
                            <label>股票名称</label>
                            <input class="form-control" type="text" ic-form-field="name" placeholder="股票名称">
                        </div>
                        <div class="form-group">
                            <label>股票代码</label>
                            <input class="form-control" type="text" ic-form-field="code" placeholder="股票代码">
                        </div>
                        <div class="buttons">
                            <button class="btn btn-primary"
                                    ic-form-submit
                                    ic-submit-action="addStock()"
                                    ic-popup-close>
                                保存
                            </button>
                            <button class="btn btn-default" ic-popup-close>关闭</button>
                        </div>
                    </div>
                </div>

                <!-- 股票价格涨跌幅计算 -->
                <div ic-ctrl="countSwingCtrl" ic-popup="countSwing">
                    <div class="column is-10" ic-form="sw" style="padding:10px 20px 0 20px;">

                        <div class="field is-grouped is-grouped-right">
                            <p class="control is-expanded">
                                <input class="input is-small" type="text" ic-form-field="code" placeholder="股票code">
                            </p>
                            <p class="control is-expanded">
                                <input class="input is-small" type="number" ic-form-field="price" placeholder="现价">
                            </p>
                            <p class="control">
                                <button class="button is-small is-primary"
                                        ic-form-submit
                                        ic-submit-action="countSwing()">
                                    计算涨跌幅
                                </button>
                            </p>
                            <p class="control">
                                <button class="button is-small" ic-popup-close>关闭</button>
                            </p>
                        </div>

                        <div id="countSwingResult" style="white-space: pre;  line-height: 1.6;">
                        </div>
                    </div>
                </div>

                <!-- 语音提醒 -->
                <div ic-ctrl="setVoiceWarnCtrl" ic-popup="setVoiceWarn">
                    <div class="column is-12" style="padding:20px;">
                        <h3 class="title is-5">
                            <span style="padding:0 9px 0 9px; vertical-align: -4px;">设置语音警告</span>
                            <button class="button is-primary is-small" ic-popup-target="setWarnItem">添加新项</button>
                            <button class="button is-small" role="toggleBtn" ic-click="toggle">开启语音</button>
                            <button class="button is-small" ic-popup-close>关闭窗口</button>
                            <button class="button is-small" ic-click="debug">debug</button>
                        </h3>
                        <div class="tags is-right" ic-select="type" ic-select-cla="is-primary" ic-select-on-change="onTypeChange">
                            <span class="tag" ic-val="timer">timer</span>
                            <span class="tag" ic-val="interval">interval</span>
                            <span class="tag" ic-val="action">action</span>
                        </div>
                        <table class="table is-striped" style="margin-top:15px;font-size:14px;" ic-tpl="warnList">
                            <tr ic-for="i,v in model" data-id="{{ v.id }}" id="{{ 'k'+v.id }}" draggable="true" ic-dragstart="dragstart"
                                ic-drop="drop" ic-dragover="dragover" ic-dragleave="dragleave">
                                <td>{{ v.name }}</td>
                                <td>{{ v.trigger }}</td>
                                <td class="pre">{{ v.content }}</td>
                                <td>
                                    <button class="button is-primary is-small" ic-click="edit:{{ v.id }}" ic-popup-target="setWarnItem">修改</button>
                                    <button class="button is-primary is-small" ic-click="rm:{{ v.id }}">删除</button>
                                    <button class="button is-primary is-small" ic-click="up:{{ v.id }}">置顶</button>
                                    <button ic-class="button {{ v.disable?'':'is-primary'}} is-small" ic-click="disable:{{ v.id }}:{{ v.disable }}">
                                        {{ v.disable ? '启用':'禁用' }}
                                    </button>
                                </td>
                            </tr>
                        </table>

                        <div class="column" ic-popup="setWarnItem">
                            <div ic-tpl="setWarnItem" ic-tpl-init="{}">
                                <div ic-form>
                                    <div class="field">
                                        <div class="control">
                                            <input class="input" type="text" placeholder="name,可选" value="{{ model.name }}" ic-form-field="name">
                                            <input type="hidden" value="{{ model.id }}" ic-form-field="id">
                                        </div>
                                    </div>
                                    <div class="field">
                                        <div class="control">
                                            <input class="input" type="text" placeholder="动作触发:daban | 定时触发: 9:00 | 重复触发:10(单位分钟)"
                                                   value="{{ model.trigger }}" ic-form-field="trigger">
                                        </div>
                                    </div>
                                    <div class="field">
                                        <div class="control">
                                            <textarea rows="7" class="textarea" placeholder="警告内容"
                                                      ic-form-field="content">{{ model.content }}</textarea>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <div class="control">
                                            <button class="button is-primary" ic-form-submit ic-submit-action="save()">
                                                保存
                                            </button>
                                            <button class="button" ic-click="reset">
                                                重置
                                            </button>
                                            <button class="button" ic-popup-close="setWarnItem">关闭</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </main>
        </div>
    </div>

    <footer class="toolbar toolbar-footer none">
    </footer>
</div>
</body>
</html>
