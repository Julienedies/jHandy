<div class="column" ic-ctrl="setSystemCtrl" ic-popup="setSystem">

    <div class="column">
        <div ic-tpl="setSystem" ic-tpl-init="{system:{}, tags:{}}">
            <div class="table_0" ic-form="setSystem" ic-init="system=model.system; tags=model.tags;">
                <!-- tr -->
                <div>
                    <h6>交易系统名称</h6>
                    <div>
                        <div class="control">
                            <input class="input" type="text" name="name" value="{{system['name']}}" ic-form-field ic-field-rule="required">
                            <input type="hidden" name="id" value="{{system.id}}" ic-form-field>
                        </div>
                    </div>
                </div>
                <!-- tr -->
                <div>
                    <h6>目标行情</h6>
                    <div>
                        <div class="control">
                            <input class="input" type="text" name="目标行情" value="{{system['目标行情']}}" ic-form-field>
                        </div>
                    </div>
                </div>
                <!-- tr -->
                <div>
                    <h6>行情逻辑</h6>
                    <div class="field">
                        <div class="control">
                            <textarea class="textarea is-medium" rows="2" ic-form-field="行情逻辑">{{system['行情逻辑']}}</textarea>
                        </div>
                    </div>
                </div>
                <!-- tr -->
                <div>
                    <h6>系统条件</h6>
                    <div>
                        <div class="control">
                            <textarea class="textarea is-medium" rows="2" ic-form-field="系统条件">{{system['系统条件']}}</textarea>
                        </div>
                    </div>
                </div>
                <!-- tr -->
                <div>
                    <h6>买点</h6>
                    <div>
                        <div class="control">
                            <input class="input" type="text" name="买点" value="{{system['买点']}}" ic-form-field>
                        </div>
                    </div>
                </div>
                <!-- tr -->
                <div ic-viewer ic-viewer-url="href">
                    <h6>示例图片</h6>
                    <div>
                        <div class="field is-grouped is-grouped-multiline" ic-select="示例图片" ic-select-type="checkbox" ic-form-field="示例图片">
                            <div class="control" ic-for="i,v in (system['示例图片']||[])">
                                <div class="tags has-addons">
                                    <span class="tag is-medium" ic-select-item ic-has-selected="true" ic-val="{{ v }}">{{ parseImgName(v) }}</span>
                                    <a class="tag is-medium hint--top" aria-label="图片预览" ic-href="{{ v }}" ic-viewer-item>
                                        <span class="icon is-medium"><i class="far fa-eye"></i></span>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="control">
                            <div ic-select-path ic-select-path-on-done="onSelectPathDone">
                                <button class="button is-info">
                                    添加示例图片
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- tr -->
                <div>
                    <h6></h6>
                    <div>
                        <div class="buttons">
                            <button class="button is-primary"
                                    ic-form-submit="setSystem"
                                    ic-submit-action="/stock/system"
                                    ic-submit-before="submitBefore"
                                    ic-submit-on-done="done"
                            >保存
                            </button>
                            <button class="button" ic-click="reset" style="margin-left:4em;"> 重置</button>
                            <button class="button" ic-popup-close="setSystem" style="margin-left:4em;"> 关闭</button>
                        </div>
                    </div>
                </div>

                <!-- tr ------------------------------------------------------------------------------------------- -->
                <div>
                    <h6>选股条件</h6>
                    <div class="field is-grouped is-grouped-multiline" ic-select="选股条件" ic-select-type="checkbox" ic-form-field="选股条件">
                        <div class="control" ic-for="i,v in tags['选股条件']">
                            <div class="tags has-addons">
                            <span class="tag is-medium" ic-select-item ic-has-selected="system['选股条件']&&system['选股条件'].indexOf(v.text)>-1"
                                  ic-val="{{v.text}}">{{v.text}}</span>
                                <a class="tag is-medium" ic-click="tag_edit:{{v.id}}">
                                    <span class="icon is-medium"><i class="far fa-edit"></i></span>
                                </a>
                                <a class="tag is-delete is-medium"
                                   ic-ajax
                                   ic-submit-data="{{v.text}}"
                                   ic-submit-method="delete"
                                   ic-submit-action="/stock/tags/{{v.id}}"
                                   ic-submit-on-done="tag_remove_done"
                                ></a>
                            </div>
                        </div>
                        <div class="control">
                            <a class="tag is-medium" ic-click="tag_add:选股条件">
                                <span class="icon is-medium"><i class="fas fa-file-medical"></i></span>
                            </a>
                        </div>
                    </div>
                </div>
                <!-- tr -->
                <div>
                    <h6>主线风口</h6>
                    <div class="field is-grouped is-grouped-multiline" ic-select="主线风口" ic-form-field="主线风口">
                        <div class="control" ic-for="i,v in tags['主线风口']">
                            <div class="tags has-addons">
                                <span class="tag is-medium" ic-select-item ic-has-selected="system['主线风口']==v.text ? 'is-warning':''"
                                      ic-val="{{v.text}}">{{v.text}}</span>
                                <a class="tag is-medium" ic-click="tag_edit:{{v.id}}">
                                    <span class="icon is-medium"><i class="far fa-edit"></i></span>
                                </a>
                                <a class="tag is-delete is-medium"
                                   ic-ajax
                                   ic-submit-data="{{v.text}}"
                                   ic-submit-method="delete"
                                   ic-submit-action="/stock/tags/{{v.id}}"
                                   ic-submit-on-done="tag_remove_done"
                                ></a>
                            </div>
                        </div>
                        <div class="control">
                            <a class="tag is-medium" ic-click="tag_add:主线风口">
                                <span class="icon is-medium"><i class="fas fa-file-medical"></i></span>
                            </a>
                        </div>
                    </div>
                </div>
                <!-- tr -->
                <div>
                    <h6>行情性质</h6>
                    <div class="field is-grouped is-grouped-multiline" ic-select="行情性质" ic-form-field="行情性质">
                        <div class="control" ic-for="i,v in tags['行情性质']">
                            <div class="tags has-addons">
                                <span class="tag is-medium" ic-select-item ic-has-selected="system['行情性质']==v.text?'is-warning':''" ic-val="{{v.text}}">{{v.text}}</span>
                                <a class="tag is-medium" ic-click="tag_edit:{{v.id}}">
                                    <span class="icon is-medium"><i class="far fa-edit"></i></span>
                                </a>
                                <a class="tag is-delete is-medium"
                                   ic-ajax
                                   ic-submit-data="{{v.text}}"
                                   ic-submit-method="delete"
                                   ic-submit-action="/stock/tags/{{v.id}}"
                                   ic-submit-on-done="tag_remove_done"
                                ></a>
                            </div>
                        </div>
                        <div class="control">
                            <a class="tag is-medium" ic-click="tag_add:行情性质">
                                <span class="icon is-medium"><i class="fas fa-file-medical"></i></span>
                            </a>
                        </div>
                    </div>
                </div>
                <!-- tr -->
                <div>
                    <h6>建仓节点</h6>
                    <div class="field is-grouped is-grouped-multiline" ic-select="建仓节点" ic-form-field="建仓节点">
                        <div class="control" ic-for="i,v in tags['建仓节点']">
                            <div class="tags has-addons">
                                <span class="tag is-medium" ic-select-item ic-has-selected="system['建仓节点']==v.text ? 'is-warning':''"
                                      ic-val="{{v.text}}">{{v.text}}</span>
                                <a class="tag is-medium" ic-click="tag_edit:{{v.id}}">
                                    <span class="icon is-medium"><i class="far fa-edit"></i></span>
                                </a>
                                <a class="tag is-delete is-medium"
                                   ic-ajax
                                   ic-submit-data="{{v.text}}"
                                   ic-submit-method="delete"
                                   ic-submit-action="/stock/tags/{{v.id}}"
                                   ic-submit-on-done="tag_remove_done"
                                ></a>
                            </div>
                        </div>
                        <div class="control">
                            <a class="tag is-medium" ic-click="tag_add:建仓节点">
                                <span class="icon is-medium"><i class="fas fa-file-medical"></i></span>
                            </a>
                        </div>
                    </div>
                </div>
                <!-- tr -->
                <div>
                    <h6>风险</h6>
                    <div class="field is-grouped is-grouped-multiline" ic-select="风险" ic-form-field="风险">
                        <div class="control" ic-for="i,v in tags['风险']">
                            <div class="tags has-addons">
                                <span class="tag is-medium" ic-select-item ic-has-selected="system['风险']==v.text ? 'is-warning':''" ic-val="{{v.text}}">{{v.text}}</span>
                                <a class="tag is-medium" ic-click="tag_edit:{{v.id}}">
                                    <span class="icon is-medium"><i class="far fa-edit"></i></span>
                                </a>
                                <a class="tag is-delete is-medium"
                                   ic-ajax
                                   ic-submit-data="{{v.text}}"
                                   ic-submit-method="delete"
                                   ic-submit-action="/stock/tags/{{v.id}}"
                                   ic-submit-on-done="tag_remove_done"
                                ></a>
                            </div>
                        </div>
                        <div class="control">
                            <a class="tag is-medium" ic-click="tag_add:风险">
                                <span class="icon is-medium"><i class="fas fa-file-medical"></i></span>
                            </a>
                        </div>
                    </div>
                </div>
                <!-- tr -->
                <div>
                    <h6>预期收益</h6>
                    <div class="field is-narrow">
                        <div class="control">
                            <div class="select is-fullwidth">
                                <select ic-form-field="预期收益">
                                    <option></option>
                                    <option value="1%" ic-has-selected="system['预期收益']=='1%'">1%</option>
                                    <option value="3%" ic-has-selected="system['预期收益']=='3%'">3%</option>
                                    <option value="5%" ic-has-selected="system['预期收益']=='5%'">5%</option>
                                    <option value="7%" ic-has-selected="system['预期收益']=='7%'">7%</option>
                                    <option value="9%" ic-has-selected="system['预期收益']=='9%'">9%</option>
                                    <option value="13%" ic-has-selected="system['预期收益']=='13%'">13%</option>
                                    <option value="15%" ic-has-selected="system['预期收益']=='15%'">15%</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- tr -->
                <div>
                    <h6>持股周期</h6>
                    <div class="field is-narrow">
                        <div class="control">
                            <div class="select is-fullwidth">
                                <select ic-form-field="持股周期">
                                    <option ic-for="i, v in [1,2,3,4,5,6,7]" value="{{ v }}" ic-has-selected="system['持股周期']==v">{{ v }}天</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- tr -->
                <div>
                    <h6>多空博弈</h6>
                    <div class="field">
                        <div class="control">
                            <textarea class="textarea is-medium" rows="2" ic-form-field="多空博弈">{{system['多空博弈']}}</textarea>
                        </div>
                        <p class="help is-danger">持币者的买入意愿? 持股者的卖出意愿? 谁的力量更大?</p>
                    </div>
                </div>
                <!-- tr -->
                <div>
                    <h6>计划预案</h6>
                    <div>
                        <textarea class="textarea is-medium" ic-form-field="计划预案" rows="4">{{system['计划预案']}}</textarea>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
